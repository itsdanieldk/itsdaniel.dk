---
import Container from "@components/Container.astro";
import PageLayout from "@layouts/PageLayout.astro";
import ArrowCard from "@components/ArrowCard.astro";
import Link from "@components/Link.astro";
import { SITE, HOME, SOCIALS } from "@consts";
import { getAllNotes, getAllProjects } from "@lib/collections";

const notes = (await getAllNotes()).slice(0, SITE.NUM_NOTES_ON_HOMEPAGE);
const projects = (await getAllProjects()).slice(0, SITE.NUM_PROJECTS_ON_HOMEPAGE);
---

<PageLayout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <h1 class="animate font-bold text-black dark:text-white text-2xl">
      Hey, it's Daniel! <span class="text-4xl">ðŸª»</span>
    </h1>
    <div class="space-y-16">
      <section>
        <article class="space-y-4">
          <p class="animate">
            Welcome! I'm Daniel, and I share my thoughts and experiences in software engineering, particularly functional programming,
            distributed and parallel systems, and architecture.
          </p>
          <p class="animate">
            I share notes whenever I solve an interesting problem or learn something new, with the goal of helping others along the way.
            Right now I'm focused on .NET and Azure, so expect plenty of content on those topics.
          </p>
          <p class="animate">If you'd like to get in touch, feel free to reach out on social media or send me an email.</p>
        </article>
        <ul class="animate flex flex-wrap gap-2">
          {
            SOCIALS.map((SOCIAL) => (
              <li class="flex gap-x-2 text-nowrap">
                <Link href={SOCIAL.HREF} external aria-label={`${SITE.NAME} on ${SOCIAL.NAME}`}>
                  {SOCIAL.NAME}
                </Link>
                {"/"}
              </li>
            ))
          }
          <li class="line-clamp-1">
            <Link href={`mailto:${SITE.EMAIL}`} aria-label={`Email ${SITE.NAME}`}>
              {SITE.EMAIL}
            </Link>
          </li>
        </ul>
      </section>

      <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h2 class="font-semibold text-black dark:text-white">Latest notes</h2>
          <Link href="/notes"> See all notes </Link>
        </div>
        <ul class="flex flex-col gap-4">
          {
            notes.map((note) => (
              <li>
                <ArrowCard entry={note} />
              </li>
            ))
          }
        </ul>
      </section>

      <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h2 class="font-semibold text-black dark:text-white">Recent projects</h2>
          <Link href="/projects"> See all projects </Link>
        </div>
        <ul class="flex flex-col gap-4">
          {
            projects.map((project) => (
              <li>
                <ArrowCard entry={project} />
              </li>
            ))
          }
        </ul>
      </section>
    </div>
  </Container>
</PageLayout>

<script
  is:inline
  type="application/ld+json"
  set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "WebSite",
    name: SITE.NAME,
    url: "https://itsdaniel.dk",
    description: HOME.DESCRIPTION,
    author: {
      "@type": "Person",
      name: "Daniel Larsen",
      url: "https://itsdaniel.dk/about",
      sameAs: SOCIALS.map((social) => social.HREF),
    },
    inLanguage: "en-US",
  })}
/>
